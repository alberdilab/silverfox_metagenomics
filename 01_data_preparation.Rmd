# Data preparation

## Load data

Load the original data files outputted by the bioinformatic pipeline.

### Sample metadata

```{r load_sample_metadata, warning=FALSE, comments="", message=FALSE, eval=FALSE}
sample_metadata <- read_csv("data/sample_metadata.csv") %>%
  rename(sample =1)
```


#### Read counts

```{r load_read_counts, warning=FALSE, comments="", message=FALSE, eval=FALSE}
read_counts <- read_tsv("data/counts.tsv") %>%
    rename(genome=1) %>%
    select(c("genome",sample_metadata$sample)) 
```


#### Filter read counts

```{r load_read_counts, warning=FALSE, comments="", message=FALSE, eval=FALSE}
read_counts <- read_counts %>%
  filter(rowSums(. != 0, na.rm = TRUE) > 0) %>%
  select_if(~!all(. == 0))  %>%
  select(one_of(c("genome",sample_metadata$sample)))

head(read_counts)
```


#### Genome taxonomy

```{r load_genome_metadata, warning=FALSE, comments="", message=FALSE, eval=FALSE}
genome_metadata <- read_tsv("data/genomeInfo.csv") %>%
   semi_join(., read_counts, by = "genome") %>%
   arrange(match(genome,read_counts$genome))
```


#### Genome coverage





